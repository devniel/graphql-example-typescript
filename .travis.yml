language: node_js
node_js:
- 11.1.0
deploy:
  provider: script
  script: bash ./deploy.sh
  on: master
before_install:
- openssl aes-256-cbc -K $encrypted_bfd2d857407e_key -iv $encrypted_bfd2d857407e_iv
  -in .travis/travis.key.enc -out .travis/travis.key -d
- chmod +x ./deploy.sh
- eval "$(ssh-agent -s)"
- chmod 600 .travis/travis.key
- ssh-add .travis/travis.key
- ssh-keyscan 142.93.0.148 >> ~/.ssh/known_hosts
- git remote add dokku dokku@142.93.0.148:youl
- git config --global push.default simple
script:
- yarn
- yarn build
cache: yarn
notifications:
  email: false
  webhooks:
    urls:
      secure: AkBwx5QJPLp91j03FH7R54C3Qvk26Et80DoWhX1HH9eg+d+bjgw/eY0ym6SiKB4uDfsf7hhGkY4b3Zd4XDih5FAvbHe793PxhTz2NSbxNmNPG/f9tciPEPfj2xaAQbtc2DTPaE8xtbbsMJkq7Q/142+93MsrfhaE0E1NxeBejDUeuUGcZL9QQjZImKtEb85HViXPpQCYw1D/OAFjFODvxBor24Qw7S9T9xAixMoHLrxAKL5FuIKrFNMo/nHAAKhtpU3vywkjOltcrPjPMQm6raRyWzHSB/Z0UpPSlI4MqlOQ97sYHoseMCEeUJ9OIyNNos2V9PZlK7uYFpC6MGAQ99k9aEEdk2uqyQj4k8iczPzVrUQOLACXEQ2uwLlXyCg8+RuLL9R8NGt0iZ0ZBEvacDThGu0/MGFBAu6RomORHeU2QY/tbAtovOn5wDJ32NW76iXuH70c0TIGm7vuUm4e9lbixtWZEdSShUZwsPvIUFnypctY03yTty3s5ZV1TlFpJIDrdSj6QMZW6lFYVBf4D3ExPnkKMSBNmphT5dAKIkPky6VrjW1bep84zwVTEBYEmwENM73im6MzLuPWlKKRWzamiePQshLh2HHoER4TtjJ0Xb0/fmghR3TmGLYCiSFSQOru0mWYgzDDdbbnjZU64FWjmj3WWzWCax4lzOPS634=
    on_success: always
    on_failure: always
    on_start: always
    on_cancel: always
    on_error: always
